{
  "name": "Main Branch Protection",
  "target": "branch",
  "enforcement": "active",
  "conditions": {
    "ref_name": {
      "include": ["main"]
    }
  },
  "parameters": {
    "required_status_checks": {
      "strict": true,
      "contexts": [
        "branch-protection-check",
        "terraform-validate",
        "security-scanning",
        "kubernetes-deploy",
        "ansible-lint"
      ]
    },
    "dismiss_stale_reviews_on_push": true,
    "require_code_owner_reviews": true,
    "required_approving_review_count": 2,
    "require_last_push_approval": true,
    "required_linear_history": true,
    "allow_force_pushes": false,
    "allow_deletions": false,
    "block_creations": false,
    "required_conversation_resolution": true,
    "require_signed_commits": true,
    "lock_branch": false,
    "allow_fork_syncing": true
  }
}
